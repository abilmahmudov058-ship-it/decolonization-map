<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Decolonization Atlas</title>
  <style>
    :root{
      --bg:#0b1220;
      --bg2:#0f172a;
      --text:#ffffff;
      --muted:rgba(255,255,255,.70);
      --muted2:rgba(255,255,255,.55);
      --card:rgba(255,255,255,.06);
      --border:rgba(255,255,255,.12);
      --shadow:0 22px 70px rgba(0,0,0,.55);
      --accent:#f59e0b;
      --accent2:#60a5fa;
      --accent3:#34d399;
      --radius:22px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 600px at 50% -10%, rgba(255,255,255,.10), transparent 65%),
        radial-gradient(900px 600px at 20% 30%, rgba(96,165,250,.12), transparent 65%),
        radial-gradient(900px 600px at 80% 35%, rgba(52,211,153,.10), transparent 65%),
        radial-gradient(900px 650px at 50% 110%, rgba(245,158,11,.10), transparent 70%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      overflow-x:hidden;
    }

    /* Transition overlay */
    .pageTransition{
      position:fixed; inset:0; z-index:20000; pointer-events:none;
      background:
        radial-gradient(900px 600px at 50% -10%, rgba(255,255,255,.10), transparent 65%),
        radial-gradient(900px 600px at 20% 30%, rgba(96,165,250,.12), transparent 65%),
        radial-gradient(900px 600px at 80% 35%, rgba(52,211,153,.10), transparent 65%),
        radial-gradient(900px 650px at 50% 110%, rgba(245,158,11,.10), transparent 70%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      opacity:1; transition: opacity 420ms ease;
    }
    html.page-loaded .pageTransition{opacity:0}
    html.page-leave .pageTransition{opacity:1; transition-duration:320ms}

    .langPill{
      position:fixed;
      /* Keep the pill fully inside the top edge on all pages */
      top:calc(10px + env(safe-area-inset-top));
      right:16px;
      z-index:12000;
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.10);
      backdrop-filter: blur(12px);
      box-shadow: 0 18px 55px rgba(0,0,0,.35);
      color:#fff;
      cursor:pointer;
      user-select:none;
    }
    .langPill svg{opacity:.9}
    .wrap{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:46px 18px;
    }
    .hero{
      width:min(980px, 100%);
      text-align:center;
      padding:56px 22px 34px;
    }
    .icon{
      width:72px;height:72px;
      margin:0 auto 18px;
      border-radius:999px;
      background: rgba(245,158,11,.95);
      box-shadow: 0 22px 70px rgba(0,0,0,.55);
      display:grid; place-items:center;
    }
    .icon svg{filter: drop-shadow(0 10px 25px rgba(0,0,0,.35));}
    h1{
      margin:0 0 10px;
      font-size:64px;
      letter-spacing:.2px;
      line-height:1.05;
    }
    .sub{
      margin:0 0 18px;
      font-size:22px;
      color:var(--muted);
    }
    .desc{
      margin:0 auto 26px;
      max-width:820px;
      color:var(--muted2);
      font-size:18px;
      line-height:1.6;
    }
    .cta{
      display:inline-flex;
      align-items:center;
      gap:12px;
      padding:14px 22px;
      border-radius:14px;
      border:1px solid rgba(245,158,11,.55);
      background: rgba(245,158,11,.92);
      color:#0b1220;
      text-decoration:none;
      font-weight:700;
      box-shadow: 0 18px 60px rgba(0,0,0,.40);
      transition: transform .08s ease, filter .2s ease;
      cursor:pointer;
      user-select:none;
    }
    .cta:hover{filter:brightness(1.03)}
    .cta:active{transform: translateY(1px)}
    .divider{
      height:1px;
      width:min(760px, 100%);
      margin:38px auto 26px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent);
    }
    .stats{
      width:min(760px, 100%);
      margin:0 auto;
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:20px;
    }
    @media (max-width: 720px){
      h1{font-size:44px}
      .sub{font-size:18px}
      .desc{font-size:16px}
      .stats{grid-template-columns:1fr}
    }
    .stat{
      padding:12px 10px;
    }
    .stat .num{
      font-size:34px;
      font-weight:800;
      letter-spacing:.2px;
    }
    .stat:nth-child(1) .num{color:var(--accent)}
    .stat:nth-child(2) .num{color:var(--accent2)}
    .stat:nth-child(3) .num{color:var(--accent3)}
    .stat .lbl{
      margin-top:6px;
      color:var(--muted2);
      font-size:14px;
      letter-spacing:.2px;
    }
    .foot{
      margin-top:24px;
      color:rgba(255,255,255,.45);
      font-size:12.5px;
    }
  
    /* Stagger intro animation */
    .stagger{opacity:0; transform: translateY(10px); filter: blur(2px);}
    html.page-loaded .stagger{opacity:1; transform:none; filter:none; transition: opacity 520ms ease, transform 520ms ease, filter 520ms ease;}
    html.page-loaded .st1{transition-delay:120ms}
    html.page-loaded .st2{transition-delay:200ms}
    html.page-loaded .st3{transition-delay:280ms}
    html.page-loaded .st4{transition-delay:360ms}
    html.page-loaded .st5{transition-delay:440ms}
    html.page-loaded .st6{transition-delay:520ms}
  </style>
<script>
(function(){
  const forceDesktop = /[?&]desktop=1/.test(location.search);
  const isMobile = (window.matchMedia && window.matchMedia("(max-width: 820px), (pointer: coarse)").matches)
    || /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
  if(isMobile && !forceDesktop){
    if(!/index_mobile\.html$/i.test(location.pathname)){
      location.replace("index_mobile.html" + location.search);
    }
  }
})();
</script>
</head>
<body>
  <div class="pageTransition" aria-hidden="true"></div>

  <button class="langPill" id="langToggle" type="button" aria-label="Toggle language">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <path d="M4 5h7" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
      <path d="M7.5 5c0 5-2.2 8.6-6 11" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
      <path d="M6 10h7" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
      <path d="M10.5 5c0 5.2 2.2 9.1 6.5 12" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
      <path d="M14 20l4-10 4 10" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M15.7 16h4.6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
    </svg>
    <span id="langLabel">EN</span>
  </button>

  <div class="wrap">
    <main class="hero">
      <div class="icon stagger st1" aria-hidden="true">
        <svg width="34" height="34" viewBox="0 0 24 24" fill="none">
          <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10Z" stroke="#fff" stroke-width="1.8"/>
          <path d="M2 12h20" stroke="#fff" stroke-width="1.8" stroke-linecap="round"/>
          <path d="M12 2c3.2 3.6 4.8 7 4.8 10s-1.6 6.4-4.8 10c-3.2-3.6-4.8-7-4.8-10S8.8 5.6 12 2Z" stroke="#fff" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>

      <h1 id="t_h1" class="stagger st2">Decolonization Atlas</h1>
      <p class="sub stagger st3" id="t_sub">Interactive Map of 20th Century Decolonization</p>
      <p class="desc stagger st4" id="t_desc">
        Explore how the process of decolonization in the 20th century transformed the political map of the world.
        Click countries to see independence years, former colonial powers, and postcolonial literature linked to each place.
      </p>

      <a class="cta stagger st5" href="map.html" data-nav="1" id="t_cta">
        <span id="t_cta_txt">Explore Interactive Map</span>
        <span aria-hidden="true">⚡</span>
      </a>

      <div class="divider stagger st6" role="presentation"></div>

      <section class="stats stagger st6" aria-label="Key stats">
        <div class="stat">
          <div class="num" id="t_s1n">83</div>
          <div class="lbl" id="t_s1l">Nations</div>
        </div>
        <div class="stat">
          <div class="num" id="t_s2n">1960</div>
          <div class="lbl" id="t_s2l">Peak Year</div>
        </div>
        <div class="stat">
          <div class="num" id="t_s3n">1922–1993</div>
          <div class="lbl" id="t_s3l">Timeline</div>
        </div>
      </section>

      <div class="foot" id="t_foot">Made by MPGU students • Educational project</div>
    </main>
  </div>

  <script>
    // Transition
    (function(){
      const root = document.documentElement;
      const enter = () => root.classList.add("page-loaded");
      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", () => requestAnimationFrame(enter));
      } else { requestAnimationFrame(enter); }
      window.addEventListener("load", () => requestAnimationFrame(enter));

      const go = (href) => {
        root.classList.remove("page-loaded");
        root.classList.add("page-leave");
        setTimeout(() => { window.location.href = href; }, 320);
      };

      document.addEventListener("click", (e) => {
        const a = e.target.closest('a[data-nav="1"]');
        if(!a) return;
        e.preventDefault();
        go(a.getAttribute("href"));
      });
    })();

    // Language toggle + persist for map
    (function(){
      const KEY = "decolonization_lang";
      let lang = localStorage.getItem(KEY) || "en";

      const T = {
        en: {
          h1:"Decolonization Atlas",
          sub:"Interactive Map of 20th Century Decolonization",
          desc:"Explore how the process of decolonization in the 20th century transformed the political map of the world. Click countries to see independence years, former colonial powers, and postcolonial literature linked to each place.",
          cta:"Explore Interactive Map",
          s1l:"Nations", s2l:"Peak Year", s3l:"Timeline",
          foot:"Made by MPGU students • Educational project",
          pill:"EN"
        },
        ru: {
          h1:"Атлас деколонизации",
          sub:"Интерактивная карта деколонизации XX века",
          desc:"Исследуй, как деколонизация в XX веке изменила политическую карту мира. Кликни по стране, чтобы увидеть год независимости, бывшую метрополию и блок постколониальной литературы, связанной с этим местом.",
          cta:"Открыть интерактивную карту",
          s1l:"Страны", s2l:"Пиковый год", s3l:"Период",
          foot:"Выполнено студентами МПГУ • Учебный проект",
          pill:"RU"
        }
      };

      const set = (id, v) => { const el=document.getElementById(id); if(el) el.textContent=v; };
      function apply(){
        const d = T[lang];
        set("t_h1", d.h1);
        set("t_sub", d.sub);
        set("t_desc", d.desc);
        set("t_cta_txt", d.cta);
        set("t_s1n", "83");
        set("t_s1l", d.s1l);
        set("t_s2n", "1960");
        set("t_s2l", d.s2l);
        set("t_s3n", "1922–1993");
        set("t_s3l", d.s3l);
        set("t_foot", d.foot);
        set("langLabel", d.pill);
        document.documentElement.lang = lang;
      }
      apply();

      document.getElementById("langToggle").addEventListener("click", ()=>{
        lang = (lang === "en") ? "ru" : "en";
        localStorage.setItem(KEY, lang);
        apply();
      });
    })();
  </script>
</body>
</html>
